(this["webpackJsonpvideo-book-app"]=this["webpackJsonpvideo-book-app"]||[]).push([[0],{36:function(e,t,s){},37:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},82:function(e,t,s){"use strict";s.r(t);var c=s(1),i=s.n(c),a=s(27),n=s.n(a),o=s(3),l=s(4),r=(s(36),Object(c.createContext)(null)),d=Object(c.createContext)(null),u=(s(37),s(0)),j=function(e){var t=e.addList,s=Object(c.useRef)();return Object(u.jsxs)("div",{className:"d-none d-sm-flex",children:[Object(u.jsx)("input",{ref:s,className:"form-control me-2",type:"text",placeholder:"New list name.."}),Object(u.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){t(s.current.value),s.current.value=""},children:"Add"})]})},b=function(e){var t=e.addList,s=Object(c.useRef)();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"btn d-flex d-sm-none p-0","data-bs-toggle":"offcanvas","data-bs-target":"#hiddenMenu",children:Object(u.jsx)("i",{className:"fas fa-bars",style:{fontSize:"1.5rem"}})}),Object(u.jsxs)("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"hiddenMenu",children:[Object(u.jsx)("div",{className:"offcanvas-header",children:Object(u.jsx)("button",{type:"button",className:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})}),Object(u.jsx)("div",{className:"offcanvas-body",children:Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)("input",{ref:s,className:"form-control me-2",type:"text",placeholder:"New list name.."}),Object(u.jsx)("button",{className:"btn btn-outline-primary","data-bs-dismiss":"offcanvas",onClick:function(){t(s.current.value),s.current.value=""},children:"Add"})]})})]})]})},m=function(e){var t=e.add;return Object(u.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(u.jsxs)("div",{className:"container px-3 px-sm-2",children:[Object(u.jsxs)("span",{id:"app-name",className:"navbar-brand mb-0",children:[Object(u.jsx)("span",{className:"text-primary",children:"video"}),Object(u.jsx)("span",{className:"text-secondary",children:"book"})]}),Object(u.jsx)(j,{addList:t}),Object(u.jsx)(b,{addList:t})]})})},h=(s(39),s(40),s(12)),v=s.n(h),O=s(15),f=function(e){var t=e.remove,s=Object(c.useContext)(r);return Object(u.jsxs)("div",{className:"dropdown",children:[Object(u.jsx)("div",{className:"video-dropdown","data-bs-toggle":"dropdown",children:Object(u.jsx)("i",{className:"fas fa-ellipsis-h"})}),Object(u.jsx)("ul",{className:"dropdown-menu",children:Object(u.jsx)("li",{children:Object(u.jsxs)("button",{className:"dropdown-item ".concat(s.isLocked?"disabled":"text-danger"),disabled:s.isLocked,onClick:t,children:[Object(u.jsx)("i",{className:"far fa-trash-alt dropdown-icon"}),"Remove video"]})})})]})},x=function(e){var t=e.video,s=e.remove,i="AIzaSyCDqFNTDPSozW920jI5tpHjugfxM5du8DE",a=Object(c.useContext)(d),n=a.lists,j=a.setLists,b=Object(c.useContext)(r),m=Object(c.useState)("none"),h=Object(l.a)(m,2),x=h[0],p=h[1],g=Object(c.useState)({views:0,likes:0,dislikes:0}),k=Object(l.a)(g,2),N=k[0],w=k[1],y=Object(c.useState)(""),L=Object(l.a)(y,2),S=L[0],C=L[1],D=Object(c.useState)(""),I=Object(l.a)(D,2),F=I[0],V=I[1],M=Object(c.useState)(new Date(0)),R=Object(l.a)(M,2),E=R[0],H=R[1],P=Object(c.useState)(O.a.format(new Date(t.timeStamp),"DD.MM.YY at HH:mm")),U=Object(l.a)(P,2),J=U[0],T=U[1];return Object(c.useEffect)((function(){v.a.get("https://www.googleapis.com/youtube/v3/videos/?key=".concat(i,"&part=statistics&id=").concat(t.id)).then((function(e){w({views:e.data.items[0].statistics.viewCount,likes:e.data.items[0].statistics.likeCount,dislikes:e.data.items[0].statistics.dislikeCount})})).catch(),v.a.get("https://www.googleapis.com/youtube/v3/videos/?key=".concat(i,"&part=snippet&id=").concat(t.id)).then((function(e){C(e.data.items[0].snippet.title),e.data.items[0].snippet.thumbnails.maxres?V(e.data.items[0].snippet.thumbnails.maxres.url):V(e.data.items[0].snippet.thumbnails.medium.url),p(e.data.items[0].snippet.liveBroadcastContent)})).catch(),v.a.get("https://www.googleapis.com/youtube/v3/videos/?key=".concat(i,"&part=contentDetails&id=").concat(t.id)).then((function(e){H(new Date(function(e){var t=e.match(/PT(\d+H)?(\d+M)?(\d+S)?/);return null!==t?(t=t.slice(1).map((function(e){return null!=e?e.replace(/\D/,""):null})),1e3*(3600*(parseInt(t[0])||0)+60*(parseInt(t[1])||0)+(parseInt(t[2])||0))):null}(e.data.items[0].contentDetails.duration)))})).catch(),T(O.a.format(new Date(t.timeStamp),"DD.MM.YY at HH:mm"))}),[t.id]),Object(u.jsx)("div",{className:"col-12 col-sm-4 col-lg-3 py-2 d-flex",children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsxs)("div",{className:"card-img",onClick:function(){return window.open(t.url)},children:[Object(u.jsx)("img",{src:F,className:"card-img-top",alt:"..."}),"live"===x?Object(u.jsxs)("div",{className:"card-img-duration",children:[Object(u.jsx)("i",{className:"fas fa-circle live"})," LIVE"]}):Object(u.jsxs)("div",{className:"card-img-duration",children:[E.getHours()>1?"0".concat(E.getHours()-1,":"):"",E.getMinutes()>9?"".concat(E.getMinutes(),":"):"0".concat(E.getMinutes(),":"),E.getSeconds()>9?E.getSeconds():"0".concat(E.getSeconds())]})]}),Object(u.jsxs)("div",{className:"card-body pb-0",children:[Object(u.jsx)("h6",{className:"card-title",children:S}),Object(u.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[Object(u.jsx)("div",{className:"views",children:N.views}),Object(u.jsxs)("div",{className:"thumbs d-flex",children:[Object(u.jsx)("p",{className:"likes text-success",children:N.likes}),Object(u.jsx)("p",{className:"dislikes text-danger ms-3",children:N.dislikes})]})]})]}),Object(u.jsxs)("div",{className:"card-body d-flex align-items-end justify-content-between",children:[Object(u.jsx)("button",{className:"btn no-shadow p-0",disabled:b.isLocked,onClick:function(){var e=Object(o.a)(n),s=b,c=t,i=e.indexOf(b),a=s.videos.indexOf(t);c.toggleFavourite(),s.videos.splice(a,1,c),e.splice(i,1,s),j(e)},children:Object(u.jsx)("i",{className:"favourite ".concat(t.isFavourite?"fas":"far"," fa-heart ").concat(t.isFavourite?"text-danger":"text-black")})}),Object(u.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(u.jsxs)("p",{className:"time text-muted m-0 me-3",children:["added ",J]}),Object(u.jsx)(f,{remove:s})]})]})]})})},p=s(28),g=s(30),k=s(31),N=s(8),w=s(9),y=function(){function e(t){Object(N.a)(this,e),this.url=this.getURL(t),this.id=this.getVideoID(this.url),this.isFavourite=!1,this.timeStamp=(new Date).getTime()}return Object(w.a)(e,[{key:"isValid",value:function(){return!1!==this.url}},{key:"toggleFavourite",value:function(){this.isFavourite=!this.isFavourite}},{key:"getURL",value:function(e){try{return new L(e)}catch(t){return!1}}},{key:"getID",value:function(){return this.id}},{key:"getVideoID",value:function(e){try{return e.matches("youtube.com")?e.searchParams.get("v"):!!e.matches("youtu.be")&&e.pathname.slice(1,e.pathname.length)}catch(t){return!1}}},{key:"restore",value:function(e){return this.url=this.getURL(e.url),this.id=e.id,this.isFavourite=e.isFavourite,this.timeStamp=new Date(e.timeStamp).getTime(),this}}]),e}(),L=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(N.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"matches",value:function(e){return this.hostname.includes(e)}}]),s}(Object(k.a)(URL)),S=y,C=function(e){var t=e.list,s=e.remove,i=e.addVideo,a=e.toggleLock,n=Object(c.useContext)(d),r=n.lists,j=n.setLists,b=Object(c.useState)(!1),m=Object(l.a)(b,2),h=m[0],v=m[1],O=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"title-value icon","data-locked":t.isLocked,children:t.title}),Object(u.jsx)("div",{className:"ms-3 w-auto",children:Object(u.jsx)("input",{className:"form-control",type:"text",placeholder:"Paste link to video..",disabled:t.isLocked,onKeyUp:function(e){(e.ctrlKey&&"v"===e.key||"V"===e.key)&&i(e.target.value),"Enter"===e.key&&i(e.target.value)}})})]})},f=function(){var e=function(e){var s=Object(o.a)(r),c=t,i=s.indexOf(t);c.rename(e.target.value),s.splice(i,1,c),j(s),v(!1)};return Object(u.jsx)("input",{type:"text",className:"form-control w-25",defaultValue:t.title,placeholder:t.title,onBlur:e,onKeyDown:function(t){"Enter"===t.key&&e(t)},autoFocus:!0})};return Object(u.jsx)("div",{className:"row mb-sm-2",children:Object(u.jsxs)("div",{className:"col d-flex align-items-center h5",children:[Object(u.jsx)(D,{onRenameList:function(){return v(!0)},remove:s,toggleLock:a}),h?Object(u.jsx)(f,{}):Object(u.jsx)(O,{})]})})},D=function(e){var t=e.onRenameList,s=e.remove,i=e.toggleLock,a=Object(c.useContext)(r);return Object(u.jsxs)("div",{className:"dropdown",children:[Object(u.jsx)("div",{className:"title-dropdown","data-bs-toggle":"dropdown",children:Object(u.jsx)("i",{className:"title-dropdown-icon fas fa-chevron-down"})}),Object(u.jsxs)("ul",{className:"dropdown-menu",children:[Object(u.jsx)("li",{children:Object(u.jsxs)("button",{className:"dropdown-item",onClick:i,children:[Object(u.jsx)("i",{className:"fas ".concat(a.isLocked?"fa-lock-open":"fa-lock"," dropdown-icon")})," ","".concat(a.isLocked?"Unlock":"Lock"," list")]})}),Object(u.jsx)("li",{children:Object(u.jsxs)("button",{className:"dropdown-item ".concat(a.isLocked?"disabled":"text-dark"),onClick:t,children:[Object(u.jsx)("i",{className:"fas fa-edit dropdown-icon"})," Rename list"]})}),Object(u.jsx)("li",{children:Object(u.jsx)("hr",{className:"dropdown-divider"})}),Object(u.jsx)("li",{children:Object(u.jsxs)("button",{className:"dropdown-item ".concat(a.isLocked?"disabled":"text-danger"),onClick:s,children:[Object(u.jsx)("i",{className:"far fa-trash-alt dropdown-icon"})," Remove list"]})})]})]})},I=function(e){var t=e.onPrev,s=e.onNext,c=e.onSet,i=e.pages,a=e.current;return Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{className:"pagination pagination-sm",children:[Object(u.jsx)("li",{className:"page-item ".concat(0===a?"disabled":""),children:Object(u.jsx)("button",{className:"page-link",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-angle-left"})})}),function(){for(var e=[],t=0;t<i;t++)e.push(t+1);return e}().map((function(e,t){return Object(u.jsx)("li",{className:"page-item ".concat(a===t?"active":""),children:Object(u.jsx)("button",{className:"page-link",onClick:function(){return c(e-1)},children:e})},t)})),Object(u.jsx)("li",{className:"page-item ".concat(a===i-1?"disabled":""),children:Object(u.jsx)("button",{className:"page-link",onClick:s,children:Object(u.jsx)("i",{className:"fas fa-angle-right"})})})]})})},F=function(e){var t=e.remove,s=Object(c.useContext)(d),i=s.lists,a=s.setLists,n=Object(c.useContext)(r),j=Object(c.useState)(0),b=Object(l.a)(j,2),m=b[0],h=b[1];return Object(u.jsxs)("div",{className:"container mt-5 mb-5 px-3 px-sm-2",children:[Object(u.jsx)(C,{list:n,remove:t,addVideo:function(e){var t=Object(o.a)(i),s=n,c=t.indexOf(n),l=new S(e);s.addVideo(l),t.splice(c,1,s),a(t)},toggleLock:function(){var e=Object(o.a)(i),t=n,s=e.indexOf(t);t.toggleLock(),e.splice(s,1,t),a(e)}}),Object(u.jsxs)("div",{className:"row gy-2",children:[Object(u.jsx)("div",{id:"carousel-".concat(n.id),className:"carousel slide","data-bs-ride":"carousel","data-bs-interval":"false",children:Object(u.jsx)("div",{className:"carousel-inner",children:n.pages.map((function(e,t){return Object(u.jsx)("div",{className:"carousel-item ".concat(t===m?"active":""),children:Object(u.jsx)("div",{className:"row",children:e.map((function(e,t){return Object(u.jsx)(x,{video:e,remove:function(){return function(e){var t=Object(o.a)(i),s=n,c=t.indexOf(n);s.remove(e),t.splice(c,1,s),a(t)}(e)}},t)}))})},t)}))})}),Object(u.jsx)("div",{className:"d-flex justify-content-center",children:n.pages.length>1?Object(u.jsx)(I,{onNext:function(){m<n.pages.length-1&&h(m+1)},onPrev:function(){m>0&&h(m-1)},onSet:function(e){h(e)},pages:n.pages.length,current:m}):null})]})]})},V=s(29),M=s.n(V),R=function(){function e(t){Object(N.a)(this,e),this.id=M()(),this.title=t,this.isLocked=!1,this.videos=[],this.pages=this.chunk(this.videos)}return Object(w.a)(e,[{key:"toggleLock",value:function(){this.isLocked=!this.isLocked}},{key:"rename",value:function(e){""!==e&&(this.title=e.trim())}},{key:"addVideo",value:function(e){e.isValid()&&!this.containVideo(e)&&(this.videos=[e].concat(Object(o.a)(this.videos)),this.pages=this.chunk(this.videos))}},{key:"remove",value:function(e){var t=this.videos.indexOf(e);t>-1&&(this.videos.splice(t,1),this.pages=this.chunk(this.videos))}},{key:"containVideo",value:function(e){return this.videos.findIndex((function(t){return t.id===e.id}))>-1}},{key:"chunk",value:function(e){return e.length?[e.slice(0,4)].concat(Object(o.a)(this.chunk(e.slice(4),4))):[]}},{key:"restore",value:function(e){return this.id=e.id,this.title=e.title,this.isLocked=e.isLocked,this.videos=e.videos.map((function(e){return(new S).restore(e)})),this.pages=this.chunk(this.videos),this}}]),e}(),E=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),s=t[0],i=t[1];return Object(c.useEffect)((function(){var e,t=JSON.parse(localStorage.getItem("lists"));e=t?t.map((function(e){return(new R).restore(e)})):[],i(e)}),[]),Object(c.useEffect)((function(){var e=JSON.stringify(s);localStorage.setItem("lists",e)}),[s]),Object(u.jsx)(d.Provider,{value:{lists:s,setLists:i},children:Object(u.jsxs)("div",{className:"container-fluid p-0",children:[Object(u.jsx)(m,{add:function(e){var t,c=Object(o.a)(s);t=new R(""===e?"List #".concat(c.length+1):e),c.push(t),i(c)}}),s.map((function(e,t){return Object(u.jsx)(r.Provider,{value:e,children:Object(u.jsx)(F,{remove:function(){return function(e){var t=Object(o.a)(s),c=t.indexOf(e);t.splice(c,1),i(t)}(e)}})},t)}))]})})};s(58),s(59);n.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(E,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.c09c992b.chunk.js.map